<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Embed Test</title>
<style>
  body { font-family: sans-serif; background: #111; color: #fff; padding: 2rem; }
  h2 { color: #facc15; margin: 2rem 0 .5rem }
  .status { padding: .4rem .8rem; border-radius: 4px; display: inline-block; font-size: .85rem; margin-bottom: .5rem }
  .ok { background: #166534; }
  .fail { background: #991b1b; }
  .test { background: #1e293b; padding: 1.5rem; margin-bottom: 1rem; border-radius: 8px }
  .frame-wrap { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; }
  .frame-wrap iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }
  .info { font-size: .8rem; color: #94a3b8; margin-top: .5rem; line-height: 1.6 }
  .btn { background: #1d4ed8; color: #fff; border: none; padding: .6rem 1.2rem; cursor: pointer; border-radius: 4px; font-size: .9rem; margin-bottom: .5rem }
  .log { background: #0f172a; border: 1px solid #334155; padding: 1rem; font-size: .75rem; font-family: monospace; min-height: 60px; color: #7dd3fc; margin-top: 1rem; white-space: pre-wrap; }
  #env { background: #0f172a; padding: 1rem; border-radius: 6px; font-size: .8rem; font-family: monospace; color: #a3e635; margin-bottom: 2rem }
</style>
</head>
<body>

<h1>üîç Video Embed Diagnostic</h1>
<p style="color:#94a3b8">This page tests every possible way to embed your videos. Check which ones work.</p>

<div id="env">Loading environment info...</div>

<h2>Test 1 ‚Äî youtube.com/embed (standard)</h2>
<div class="test">
  <div class="status" id="s1">‚è≥ Pending</div>
  <div class="frame-wrap">
    <iframe id="f1" src="about:blank"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
  <button class="btn" onclick="loadTest(1, 'https://www.youtube.com/embed/Vtdgu98gPtw?autoplay=1&rel=0')">‚ñ∂ Load Test 1</button>
  <div class="info">Standard youtube.com embed with autoplay</div>
</div>

<h2>Test 2 ‚Äî youtube-nocookie.com/embed</h2>
<div class="test">
  <div class="status" id="s2">‚è≥ Pending</div>
  <div class="frame-wrap">
    <iframe id="f2" src="about:blank"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
  <button class="btn" onclick="loadTest(2, 'https://www.youtube-nocookie.com/embed/Vtdgu98gPtw?autoplay=1&rel=0')">‚ñ∂ Load Test 2</button>
  <div class="info">Privacy-enhanced mode ‚Äî less restrictive on embeds</div>
</div>

<h2>Test 3 ‚Äî youtube.com/embed with mute=1</h2>
<div class="test">
  <div class="status" id="s3">‚è≥ Pending</div>
  <div class="frame-wrap">
    <iframe id="f3" src="about:blank"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
  <button class="btn" onclick="loadTest(3, 'https://www.youtube.com/embed/Vtdgu98gPtw?autoplay=1&mute=1&rel=0')">‚ñ∂ Load Test 3</button>
  <div class="info">Muted autoplay ‚Äî browsers allow this more freely</div>
</div>

<h2>Test 4 ‚Äî Second video (C9qmxTuWHWw)</h2>
<div class="test">
  <div class="status" id="s4">‚è≥ Pending</div>
  <div class="frame-wrap">
    <iframe id="f4" src="about:blank"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
  <button class="btn" onclick="loadTest(4, 'https://www.youtube-nocookie.com/embed/C9qmxTuWHWw?autoplay=1&rel=0')">‚ñ∂ Load Test 4</button>
  <div class="info">Tests if the second video ID works at all</div>
</div>

<h2>Test 5 ‚Äî Known public video (YouTube test)</h2>
<div class="test">
  <div class="status" id="s5">‚è≥ Pending</div>
  <div class="frame-wrap">
    <iframe id="f5" src="about:blank"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
  </div>
  <button class="btn" onclick="loadTest(5, 'https://www.youtube-nocookie.com/embed/jNQXAC9IVRw?autoplay=1&rel=0')">‚ñ∂ Load Test 5</button>
  <div class="info">Uses a famous public YouTube video ‚Äî if THIS works but yours don't, your videos have embedding disabled</div>
</div>

<h2>Console Log</h2>
<div class="log" id="log">Click the test buttons above and watch for errors here...\n</div>

<script>
// Environment info
var env = document.getElementById('env');
env.textContent = [
  'Protocol: ' + window.location.protocol,
  'Host: ' + window.location.host,
  'Full URL: ' + window.location.href,
  'User Agent: ' + navigator.userAgent.substring(0, 80) + '...'
].join('\n');

var log = document.getElementById('log');
function addLog(msg) {
  log.textContent += new Date().toISOString().split('T')[1].split('.')[0] + ' ‚Äî ' + msg + '\n';
}

// Intercept console errors
var origError = console.error;
console.error = function() {
  addLog('ERROR: ' + Array.from(arguments).join(' '));
  origError.apply(console, arguments);
};

function loadTest(num, url) {
  var frame = document.getElementById('f' + num);
  var status = document.getElementById('s' + num);
  addLog('Test ' + num + ': Loading ' + url);
  status.textContent = '‚è≥ Loading...';
  status.className = 'status';

  frame.onload = function() {
    addLog('Test ' + num + ': iframe onload fired ‚úì');
    status.textContent = '‚úì iframe loaded (check if video plays above)';
    status.className = 'status ok';
  };
  frame.onerror = function(e) {
    addLog('Test ' + num + ': iframe error ‚Äî ' + e);
    status.textContent = '‚úó iframe error';
    status.className = 'status fail';
  };

  frame.src = url;
}

// Also detect if we're on file:// protocol
if (window.location.protocol === 'file:') {
  addLog('‚ö†Ô∏è  WARNING: You are opening this as a local file (file://)');
  addLog('‚ö†Ô∏è  YouTube WILL NOT work on file:// ‚Äî must be on a live https:// site');
  document.body.insertAdjacentHTML('afterbegin', '<div style="background:#7f1d1d;padding:1rem 2rem;margin:-2rem -2rem 2rem;font-size:1rem;font-weight:bold">‚õî You are opening this file directly from your computer. YouTube blocks all embeds on file:// ‚Äî upload to Netlify first, then test there.</div>');
}

addLog('Page loaded. Protocol: ' + window.location.protocol);
addLog('Ready ‚Äî click test buttons above');
</script>

</body>
</html>
